(function(){window.Kitty={};var Model=function(a,b){var c=this;this.modelName=a;var d=function(){return Math.round(1e8*Math.random())};return Kitty.Model[a]=function(a){var b=Kitty.Model[c.modelName];b.prototype.modelProtoReference=c,this.objid=d(),b.prototype.init=function(){for(var c in b.defaults)b.defaults.hasOwnProperty(c)&&(this[c]=a.hasOwnProperty(c)?a[c]:b.defaults[c]);b.views[this.objid]=[],b.collection.push(this)},b.prototype.set=function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this.notify()},b.prototype.get=function(a){return this[a]},b.prototype.remove=function(){for(var a in b.views[this.objid])b.views[this.objid].hasOwnProperty(a)&&b.views[this.objid][a].remove();delete b.views[this.objid];for(var c,d=0;d<b.collection.length;d++)if(b.collection[d].objid===this.objid){c=d;break}b.collection.splice(c,1)},b.prototype.notify=function(){for(var a in b.views[this.objid])b.views[this.objid][a]._render()},this.init()},Kitty.Model[a].collection=[],Kitty.Model[a].views={},Kitty.Model[a].defaults=function(){var a={};for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}(),Kitty.Model[a]};Kitty.Model=Model;var View=function(a,b){return Kitty.View[a]=function(a){var c=this;this.model=a,this.init=function(){for(var a in b)b.hasOwnProperty(a)&&(this[a]=b[a]);var c=this.model.modelProtoReference;return Kitty.Model[c.modelName].views[this.model.objid].push(this),this.el=document.createElement(b.tag),this.container.appendChild(this.el),this},this._render=function(){return this.el.innerHTML=this.template.render(this.model),b.hasOwnProperty("events")&&b.events.call(c),b.hasOwnProperty("render")&&b.render.call(c),this},this.remove=function(){this.el.parentNode.removeChild(this.el)},this.init()._render()},Kitty.View[a]};Kitty.View=View;})();